{% extends 'hospital/base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <h2>{{ title }}</h2>
    
    <form method="post" class="card">
        <div class="card-body">
            {% csrf_token %}
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="{{ form.patient.id_for_label }}" class="form-label">Patient</label>
                        {{ form.patient }}
                        {% if form.patient.errors %}
                            <div class="text-danger">{{ form.patient.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="{{ form.doctor.id_for_label }}" class="form-label">Médecin</label>
                        {{ form.doctor }}
                        {% if form.doctor.errors %}
                            <div class="text-danger">{{ form.doctor.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="{{ form.centre.id_for_label }}" class="form-label">Centre</label>
                        {{ form.centre }}
                        {% if form.centre.errors %}
                            <div class="text-danger">{{ form.centre.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="{{ form.date.id_for_label }}" class="form-label">Date et heure</label>
                        {% if appointment %}
                            <input type="datetime-local" name="date" id="{{ form.date.id_for_label }}" class="form-control" value="{{ appointment.date|date:'Y-m-d\\TH:i' }}">
                        {% else %}
                            {{ form.date }}
                        {% endif %}
                        {% if form.date.errors %}
                            <div class="text-danger">{{ form.date.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="{{ form.duration.id_for_label }}" class="form-label">Durée (minutes)</label>
                        {{ form.duration }}
                        {% if form.duration.errors %}
                            <div class="text-danger">{{ form.duration.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="{{ form.status.id_for_label }}" class="form-label">Statut</label>
                        {{ form.status }}
                        {% if form.status.errors %}
                            <div class="text-danger">{{ form.status.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <div class="mb-3">
                <label for="{{ form.reason.id_for_label }}" class="form-label">Raison</label>
                {{ form.reason }}
                {% if form.reason.errors %}
                    <div class="text-danger">{{ form.reason.errors }}</div>
                {% endif %}
            </div>
            
            <div class="mb-3">
                <label for="{{ form.notes.id_for_label }}" class="form-label">Notes</label>
                {{ form.notes }}
                {% if form.notes.errors %}
                    <div class="text-danger">{{ form.notes.errors }}</div>
                {% endif %}
            </div>
        </div>
        
        <div class="card-footer">
            <button type="submit" class="btn btn-primary">Enregistrer</button>
            <a href="{% url 'appointment_list' %}" class="btn btn-secondary">Annuler</a>
        </div>
    </form>
</div>
{% endblock %}